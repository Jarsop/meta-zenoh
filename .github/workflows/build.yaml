name: Zenoh Yocto Build

on:
  push:
    branches:
      - master
    paths-ignore:
      - README
  pull_request:
    branches:
      - master
    paths-ignore:
      - README

jobs:
  build:
    runs-on: ubuntu-24.04
    timeout-minutes: 720
    strategy:
      matrix:
        shared_memory: [shm, no-shm]
        zenoh_cpp_backend: [zenoh-c, zenoh-pico, both]

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Build Zenoh recipes
        uses: ./.github/actions/kas-build
        with:
          shared_memory: ${{ matrix.shared_memory }}
          zenoh_cpp_backend: ${{ matrix.zenoh_cpp_backend }}
